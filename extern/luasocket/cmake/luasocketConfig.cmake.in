@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

# Find required dependencies
find_dependency(Lua REQUIRED)

# Include targets
include("${CMAKE_CURRENT_LIST_DIR}/luasocketTargets.cmake")

# Set component variables
set(luasocket_FOUND TRUE)

# Check for components
if(luasocket_FIND_COMPONENTS)
    foreach(component ${luasocket_FIND_COMPONENTS})
        if(component STREQUAL "static")
            if(TARGET luasocket::static)
                set(luasocket_${component}_FOUND TRUE)
            else()
                set(luasocket_${component}_FOUND FALSE)
            endif()
        elseif(component STREQUAL "shared")
            if(TARGET luasocket::shared)
                set(luasocket_${component}_FOUND TRUE)
            else()
                set(luasocket_${component}_FOUND FALSE)
            endif()
        elseif(component STREQUAL "socket_core")
            if(TARGET luasocket_socket_core_static OR TARGET luasocket_socket_core_shared)
                set(luasocket_${component}_FOUND TRUE)
            else()
                set(luasocket_${component}_FOUND FALSE)
            endif()
        elseif(component STREQUAL "mime_core")
            if(TARGET luasocket_mime_core_static OR TARGET luasocket_mime_core_shared)
                set(luasocket_${component}_FOUND TRUE)
            else()
                set(luasocket_${component}_FOUND FALSE)
            endif()
        elseif(component STREQUAL "unix")
            if(TARGET luasocket_unix_static OR TARGET luasocket_unix_shared)
                set(luasocket_${component}_FOUND TRUE)
            else()
                set(luasocket_${component}_FOUND FALSE)
            endif()
        elseif(component STREQUAL "serial")
            if(TARGET luasocket_serial_static OR TARGET luasocket_serial_shared)
                set(luasocket_${component}_FOUND TRUE)
            else()
                set(luasocket_${component}_FOUND FALSE)
            endif()
        else()
            set(luasocket_${component}_FOUND FALSE)
        endif()
        
        if(NOT luasocket_${component}_FOUND)
            if(luasocket_FIND_REQUIRED_${component})
                message(FATAL_ERROR "luasocket component '${component}' not found")
            endif()
        endif()
    endforeach()
else()
    # Default behavior when no components specified
    set(luasocket_static_FOUND TRUE)
    set(luasocket_shared_FOUND TRUE)
    set(luasocket_socket_core_FOUND TRUE)
    set(luasocket_mime_core_FOUND TRUE)
    set(luasocket_unix_FOUND TRUE)
    set(luasocket_serial_FOUND TRUE)
endif()

check_required_components(luasocket)
